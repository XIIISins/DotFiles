#!/bin/bash
#
# TS wrapper
#

if [[ -t 0 || -p /dev/stdin ]]; then
  is_a_term=true
fi

echo_ts(){
  if [ ! -z $ECHTS_PASS ]; then
    if [ $is_a_term = true ]; then
      xfreerdp /w:1910 /h:1052 /monitors:2 /u:mjanssen@nl.yenlo /p:$ECHTS_PASS +clipboard +home-drive +auto-reconnect /v:10.31.52.17
    fi
  else
    ECHTS_PASS=$(zenity --password)
    xfreerdp /w:1910 /h:1052 /monitors:2 /u:mjanssen@nl.yenlo /p:$ECHTS_PASS +clipboard +home-drive +auto-reconnect /v:10.31.52.17
  fi
}

delt_ts(){
  if [ ! -z $SENDTS_PASS ]; then
    if [ $is_a_term = true ]; then
      xfreerdp /w:1910 /h:1052 +clipboard +home-drive +auto-reconnect /v:213.214.120.106 /u:myronj /p:$SENDTS_PASS
    fi
  else
    SENDTS_PASS=$(zenity --password)
    xfreerdp /w:1910 /h:1052 +clipboard +home-drive +auto-reconnect /v:213.214.120.106 /u:myronj /p:$SENDTS_PASS
  fi
}

ts_select=$(zenity --entry --text='delta or echo')

case $ts_select in
  echo)
    echo_ts
    ;;
  delta)
    delt_ts
    ;;
  *)
    zenity --error --text="No selection made"
    ;;
esac

